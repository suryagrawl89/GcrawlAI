<main class="container w-100 flex-col align-center text-center">

  <!-- ================= HERO SECTION ================= -->
  <section class="hero mt-5 pt-4">
    <h1 class="no-animation">
      Transform any website into <br>
      structured <span class="primary-text-gradient">LLM-ready</span> data
    </h1>
    <p class="no-animation">
      Get clean web data from any website and power your AI apps, all open source.
    </p>
  </section>

  <!-- ================= MAIN FORM ================= -->
  <section class="w-100 mt-5">
    <form [formGroup]="crawlform" (ngSubmit)="Onsubmit()" class="scrape-bar" [class.no-animation]="crawlID !== null"
      [class.initial-state]="!markdownBlocks || !markdownBlocks.length">

      <!-- URL INPUT + FORMAT DROPDOWN in top-right -->
      <div class="search-input-wrapper">
        <i class="bi bi-globe2"></i>
        <input type="text" formControlName="url" class="search-input" placeholder="https://example.com"
          autocomplete="off" />

        <!-- Format multi-select dropdown -->
        <div class="dropdown format-dropdown">
          <button class="format-btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"
            (click)="$event.stopPropagation()" [disabled]="crawlform.get('button')?.value === 'links'">
            {{ formatLabel }}
          </button>
          <ul class="dropdown-menu dropdown-menu-end format-menu" (click)="$event.stopPropagation()">
            <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_md" class="format-check">
                <img src="/assets/image/markdown.png" class="filter-img"> Markdown
              </label>
            </li>
            <!-- <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_summary" class="format-check">
                <img src="/assets/image/summary.png" class="filter-img"> Summary
              </label>
            </li> -->
            <!-- <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_links" class="format-check">
                <img src="/assets/image/link.png" class="filter-img"> Links
              </label>
            </li> -->
            <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_html" class="format-check">
                <img src="/assets/image/html.png" class="filter-img"> HTML
              </label>
            </li>
            <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_ss" class="format-check">
                <img src="/assets/image/screenshot.png" class="filter-img"> Screenshots
              </label>
            </li>
            <!-- <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_json" class="format-check">
                <img src="/assets/image/json.png" class="filter-img"> JSON
              </label>
            </li> -->
            <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_seo" class="format-check">
                <img src="/assets/image/brand.png" class="filter-img"> SEO
              </label>
            </li>
            <!-- <li>
              <label class="dropdown-item format-item">
                <input type="checkbox" formControlName="enable_image" class="format-check">
                <img src="/assets/image/image.png" class="filter-img"> Images
              </label>
            </li> -->
          </ul>
        </div>
      </div>

      <!-- TABS + SUBMIT (always visible) -->
      <div class="controls-wrapper mt-2">
        <div class="custom-tabs">
          <button [matTooltip]="scrapeTooltipcontent" type="button" class="tab-btn"
            [class.active]="crawlform.get('button')?.value === 'scrape'" (click)="setButton('scrape')">
            <i class="bi bi-grid"></i> Scrape
          </button>
          <!-- <button type="button" class="tab-btn" disabled>
            <i class="bi bi-search"></i> Search
          </button> -->
          <!-- <button type="button" class="tab-btn" disabled>
            <i class="bi bi-robot"></i> Agent
            <span class="badge-new">New</span>
          </button> -->
          <button [matTooltip]="crawlTooltipcontent" type="button" class="tab-btn"
            [class.active]="crawlform.get('button')?.value === 'crawl'" (click)="setButton('crawl')">
            <i class="bi bi-bug"></i> Crawl
          </button>

          <button [matTooltip]="linksTooltipcontent" type="button" class="tab-btn" [class.active]="crawlform.get('button')?.value === 'links'"
            (click)="setButton('links')">
            <i class="bi bi-map"></i> Links
          </button>
        </div>

        <button type="submit" class="btn-primary">
          <span *ngIf="!isLoading">Submit</span>
          <div *ngIf="isLoading" class="spinner"></div>
        </button>
      </div>

    </form>
  </section>

  <!-- ================= RESULT SECTION ================= -->
  <app-report-page *ngIf="markdownBlocks && markdownBlocks.length" [blocks]="markdownBlocks" [formsvalue]="formdata"
    class="w-100 mt-5">
  </app-report-page>

</main>